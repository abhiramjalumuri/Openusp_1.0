# Linux-specific override for docker-compose.infra.yml
# Use this on Linux systems where host.docker.internal doesn't work
# Usage: docker-compose -f docker-compose.infra.yml -f docker-compose.linux.yml up -d

version: '3.8'

services:
  # Prometheus with host network mode for Linux
  prometheus-dev:
    network_mode: "host"
    ports: []  # Remove port mapping since we're using host network
    volumes:
      - ../configs/prometheus-static-linux.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus_dev_data:/prometheus
    extra_hosts: []  # Remove extra_hosts since we're using host network
    networks: []  # Remove networks since we're using host network
    
  # Grafana can stay in bridge network mode since it only needs to reach Prometheus
  grafana-dev:
    extra_hosts:
      - "host.docker.internal:host-gateway"