# OpenUSP Agent Configurations
# This file contains configuration for both USP (TR-369) and CWMP (TR-069) agents
# Separated from openusp.yml for better organization

# =============================================================================
# USP AGENT CONFIGURATION (TR-369)
# =============================================================================
usp_agent:
  # Device Information
  device:
    endpoint_id: "proto::usp.agent.001"
    product_class: "HomeGateway"
    manufacturer: "Plume Design"
    model_name: "USP-PlumeDevice-v10000"
    serial_number: "Plume-USP-SER001"
    software_version: "1.0.0"
    hardware_version: "1.0"
    device_type: "gateway"
    oui: "233343"

  # Protocol Configuration
  protocol:
    version: "1.3"
    supported_versions: "1.3,1.4"
    role: "device"
    command_key: "usp-agent-001"

  # MTP Configuration
  mtp:
    type: "websocket"

    # WebSocket Configuration
    websocket:
      url: "ws://localhost:8081/usp"
      subprotocol: "v1.usp"
      ping_interval: "30s"
      pong_timeout: "10s"
      reconnect_interval: "5s"
      max_reconnect_attempts: 10

    # MQTT Configuration
    mqtt:
      broker_url: "tcp://localhost:1883"
      client_id: "usp-agent-001"
      username: "usp"
      password: "openusp123"
      topic_request: "usp/agent/request"
      topic_response: "usp/agent/response"
      qos: 1
      retain: false
      clean_session: true
      keep_alive: "60s"

    # STOMP Configuration
    stomp:
      broker_url: "tcp://localhost:61613"
      username: "openusp"
      password: "openusp123"
      destinations:
        outbound: "/queue/agent.request" # agent → controller (outbound)
        inbound: "/queue/agent.response" # controller → agent (inbound)
      heartbeat:
        send: "30s"
        receive: "30s"

    # UDS Configuration
    uds:
      socket_path: "/tmp/usp-agent.sock"
      socket_mode: "0666"

  # Behavior Configuration
  behavior:
    auto_register: true
    periodic_inform_enabled: true
    periodic_inform_interval: "300s"
    parameter_update_notification: true
    event_notification: true
    diagnostic_mode: false

  # Security Configuration
  security:
    tls_enabled: false
    tls_cert_file: ""
    tls_key_file: ""
    tls_ca_file: ""
    tls_skip_verify: true

  # Logging Configuration
  logging:
    level: "info"
    format: "json"
    output: "stdout"
    file: "logs/tr369-agent.log"

  # Performance Configuration
  performance:
    buffer_size: 4096
    max_message_size: 1048576
    connection_timeout: "30s"
    read_timeout: "60s"
    write_timeout: "60s"
    idle_timeout: "300s"

# =============================================================================
# CWMP AGENT CONFIGURATION (TR-069)
# =============================================================================
cwmp_agent:
  # Device Information
  device:
    endpoint_id: "cwmp:Plume-003"
    product_class: "HomeGateway"
    manufacturer: "Plume Design"
    model_name: "CWMP-PlumeDevice-v10000"
    serial_number: "Plume-CWMP-SER02"
    software_version: "1.1.0"
    hardware_version: "1.0"
    device_type: "gateway"
    oui: "00D04F"

  # Protocol Configuration
  protocol:
    version: "1.2"
    supported_versions: "1.0,1.1,1.2,1.3,1.4"
    role: "cpe"
    connection_request_auth: "digest"
    parameter_key: "cwmp-agent-001"

  # ACS Configuration
  acs:
    url: "http://localhost:7547"
    username: "acs"
    password: "acs123"
    periodic_inform_enabled: true
    periodic_inform_interval: "300s"

  # Connection Request Configuration
  connection_request:
    url: "http://localhost:9999/cr"
    path: "/cr"
    port: 9999
    username: "cr"
    password: "cr123"

  # SOAP Configuration
  soap:
    version: "1.1"

  # HTTP Configuration
  http:
    timeout: "60s"
    keep_alive: true
    max_idle_connections: 10
    idle_timeout: "90s"
    tls_handshake_timeout: "10s"
    expect_continue_timeout: "1s"

  # Behavior Configuration
  behavior:
    auto_register: true
    inform_on_boot: true
    inform_on_periodic: true
    inform_on_value_change: true
    inform_on_connection_request: true
    max_envelopes: 1
    retry_min_wait_interval: "5s"
    retry_interval_multiplier: 2000

  # TR-181 Configuration
  tr181:
    root_object: "Device."
    device_type: "InternetGatewayDevice"
    spec_version: "2.19.1"
    parameter_notifications: true
    object_notifications: true

  # Session Management
  session:
    timeout: "300s"
    max_concurrent: 5
    keep_alive: true
    cookie_enabled: false

  # Security Configuration
  security:
    tls_enabled: false
    tls_cert_file: ""
    tls_key_file: ""
    tls_ca_file: ""
    tls_skip_verify: true
    certificate_auth_enabled: false
    digest_auth_enabled: true
    basic_auth_enabled: true

  # Authentication Configuration
  auth:
    realm: "CWMP"
    algorithm: "MD5"
    qop: "auth"
    nonce_timeout: "300s"

  # Logging Configuration
  logging:
    level: "info"
    format: "json"
    output: "stdout"
    file: "logs/tr069-agent.log"
    soap_messages: false
    http_requests: false

  # Performance Configuration
  performance:
    buffer_size: 4096
    max_message_size: 1048576
    connection_timeout: "30s"
    read_timeout: "60s"
    write_timeout: "60s"
    idle_timeout: "300s"
    max_connections: 100

  # RPC Methods Configuration
  rpc_methods:
    get_rpc_methods: true
    set_parameter_values: true
    get_parameter_values: true
    get_parameter_names: true
    set_parameter_attributes: true
    get_parameter_attributes: true
    add_object: true
    delete_object: true
    reboot: true
    factory_reset: false
    download: true
    upload: false

  # Events Configuration
  events:
    bootstrap: true
    boot: true
    periodic: true
    value_change: true
    connection_request: true
    transfer_complete: true
    diagnostics_complete: false
    request_download: false
    autonomous_transfer_complete: false

  # Fault Management
  fault_management:
    tolerance_enabled: true
    max_retry_count: 3
    retry_interval: "10s"
    detailed_reporting: true
